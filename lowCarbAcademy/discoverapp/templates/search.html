<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SEARCH</title>
</head>
<body>
    <form method="GET" action="{% url 'search' %}">

        <!--{% csrf_token %}-->

        <input type="search" placeholder="search here" name="search-bar">
        <button type="submit">Search</button>
    </form>

    {% block content %}
        {% if searched %}
            <h1>Results for {{ searched }}</h1>
            {% for recipe in recipes %}

            <!--

            1. probably create a div
            2. display all exisiting cookbooks user has
            3. add final button to create a new cook book

            -->

            <div id="cookbook-div" style="display:none;">

                <!-- display the existing cook books -->
                <a href="">testing</a>

                <!-- option for adding cookbook -->

                <div id="new-book-div">
                    <form method="POST" action="{% url 'cookbook' %}" id="cookbook-form">


                    </form>
                </div>
            </div>

            <button onclick='addbook()'>add to cookbook</button>
            <script>
                function addbook() {
                    var addBookDiv = document.getElementById("cookbook-div");
                    if(addBookDiv.style.display === 'none'){
                        addBookDiv.style.display = 'block';
                        console.log("visible");
                    } else {
                        addBookDiv.style.display = 'none';
                        console.log("invis");
                    }
                }
            </script>


            <form method="POST" action="{% url 'fav_recipe' %}">
                {% csrf_token %}
                <button type="submit" value="{{ recipe.id }}" name="faved" id="fav-button">Favourite</button>
            </form>

            <a href="{% url 'show_recipe' recipe.id %}">{{ recipe.name }}</a><br/><br/>
            {% endfor %}

            {% if recipes.has_previous %}
                <a href="?search-bar={{ searched }}&page=1">&laquo First Page</a>
                <a href="?search-bar={{ searched }}&page={{ recipes.previous_page_number }}">Previous</a>

            {% endif %}

            Page {{ recipes.number }} of {{ recipes.paginator.num_pages }}

            {% if recipes.has_next %}
                <a href="?search-bar={{ searched }}&page={{ recipes.next_page_number }}">Next</a>
                <a href="?search-bar={{ searched }}&page={{ recipes.paginator.num_pages }}">Last &raquo</a>

            {% endif %}

        {% endif %}
    {% endblock %}

</body>
</html>